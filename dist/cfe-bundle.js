(()=>{"use strict";const e={},o=["utm_source","utm_medium","utm_campaign","campaignid","vendorid","device","utm_content","utm_term","utm_matchtype"],t=["fbp","fbc"],n=()=>{console.log("\nSENDING TO SERVER -------------------------\x3e"),fetch("http://127.0.0.1:3000/capi",{mode:"cors",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>(console.log("response",e),e.json()))).then((e=>{console.log("json",e)})).catch((e=>{console.log("err",e)}))},l=o=>{console.log("eventName:",o),e.event=o,console.log("\n"+e),n()};window.addEventListener("load",(s=>{(e=>{const o=document.querySelectorAll(".form-btn,.cfe-trigger, .mktoButton");for(let e=0;e<o.length;e++){let t=o[e].getAttribute("data-cfe");o[e].addEventListener("click",(n=>{l(null!==t?t:o[e].innerText)}))}})(),(()=>{let o;console.log("\nMETA PIXEL EXTRACTOR --------------------------\x3e");const t=document.querySelectorAll("script");for(let e=0;e<t.length;e++)t[e].innerText.includes("fbq")&&(o=t[e].innerText,o=o.split('"init","')[1],o=o.split('");')[0],console.log("metaPixelID:",o));e.pixel_id=o})(),console.log("\nUSER AGENT EXTRACTOR -------------------------\x3e"),console.log("userAgent: ",navigator.userAgent),e.client_user_agent=navigator.userAgent,console.log("\nMETA COOKIE EXTRACTOR -------------------------\x3e"),t.forEach((o=>{console.log(o),e[o]=document.cookie.split("; ").find((e=>e.startsWith(`_${o}=`)))?.split("=")[1]})),"undefined"!=typeof MktoForms2?MktoForms2.whenReady((function(t){t.onSuccess((function(l,s){const c=t.vals();e.formData=c,e.first_name=c.FirstName,e.last_name=c.LastName,e.phone=c.Phone,e.client_ip_address=c.TCPA_IP_Address__c,e.event="MarketoFormSubmit",o.forEach((o=>{null!==localStorage.getItem(o)?(console.log(`${o} EXISTS in localStorage!`),e.utmParameters={...e.utmParameters,[o]:localStorage.getItem(o)}):console.log(`No ${o} in localStorage!!`)})),n()}))})):console.log("MktoForms2 not defined")}))})();